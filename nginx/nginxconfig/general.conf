#Block bots from indexing and following
location ~ .*/(?:archive|filter|topic)/.* {
	add_header X-Robots-Tag "noindex, nofollow" always;
}

# assets, media, allow safe files
location ~* \.(?:css(\.map)?|js(\.map)?|ttf|ttc|otf|eot|woff2?|svgz?|jpe?g|png|gif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv|pdf|docx?|dotx?|docm|dotm|xlsx?|xltx?|xlsm|xltm|pptx?|potx?|pptm|potm|ppsx?)$ {
	add_header Access-Control-Allow-Origin "*";
	expires 30d;
	access_log off;
}

# Deny access to hidden files (beginning with a period)
location ~ /\. {
	deny all;
}

##  Only allow access to these domains/sub-domains accounts.kakbima.com, accounts.kakbima.dev, kakbima.com and localhost
if ($host !~ ^(api.kakbima.com|api001.kakbima.co.ke|accounts-staging-api.kakbima.dev||api.kakbima.dev|localhost)$ ) {
	return 444;
}
##